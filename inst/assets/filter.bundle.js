/*! For license information please see filter.bundle.js.LICENSE.txt */
(self.webpackChunklitter=self.webpackChunklitter||[]).push([[181],{988:(e,t,s)=>{"use strict";var r=s(684),i=s(145),n=(s(270),s(669),s(167));class a extends n.Q{static properties={endpoint:{type:String},dataset:{type:Array},selected:{type:Array},value:{}};firstUpdated(){}constructor(){super(),this.endpoint="",this.dataset=[],this.selected=[],this.shown=!1,this.value={},this.timeout}_showDropdown(){this.shadowRoot.querySelector(".dropdown-menu").style.display="block",this.shown=!0}_hideDropdown(){this.shadowRoot.querySelector(".dropdown-menu").style.display="none",this.shown=!1}_click(){this.shown?this._hideDropdown():this._showDropdown()}_itemClick(e){this._hideDropdown(),this.selected.push(e.target.dataset.value),this.selected=this.selected.slice(0)}_variableRemove(e){let t=e.currentTarget.dataset.value;const s=this.selected.filter((e=>e!=t));this.selected=s,delete this.value[t],this._send()}_input(e){let t=e.target,s=e.target.dataset.value;clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.value[s]=t.value,this._send()}),350)}_renderButton(){return r.qy`<button @click=${this._click} class="btn btn-outline-secondary dropdown-toggle w-100" type="button" data-bs-toggle="dropdown" aria-expanded="false">Add variable</button>`}_renderInput(e){return"factor"==e.type?this._renderFactor(e):"numeric"==e.type?this._renderNumeric(e):"logical"==e.type?this._renderLogical(e):(this.value[e.name]=e.value,this._send(),this._renderCharacter(e))}_renderFactor(e){let t=e.values.map((e=>({value:e,label:e})));return r.qy`<litter-selectize data-value="${e.name}" @input=${this._input} meta="[]" placeholder="Search a value" name="" options='${JSON.stringify(t)}' ></litter-selectize>`}_renderNumeric(e){let t=1;return e.max-e.min<1&&(t=.1),r.qy`<litter-range data-value="${e.name}" @input=${this._input} min="${e.min}" max="${e.max}" step="${t}" name=""></litter-range>`}_renderCharacter(e){return r.qy`<litter-text data-value="${e.name}" @input=${this._input} name="" value=""></litter-text>`}_renderLogical(e){return r.qy`<litter-checkboxes data-value="${e.name}" @input=${this._input} name="" value='[true, false]' options='[true, false]'></litter-checkboxes>`}render(){const e=this._renderButton();if(0==this.dataset.length)return e;const t=this.dataset.filter((e=>!this.selected.includes(e.name))).map((e=>r.qy`<li><a data-value="${e.name}" class="dropdown-item">${e.label||e.name}</a></li>`)),s=r.qy`<div class="input-group">
      ${e}
      <ul @click=${this._itemClick} class="dropdown-menu dropdown-menu-end w-100">
      ${t}
      </ul>
    </div>`;if(0==this.selected.length)return s;let n=this.dataset.filter((e=>this.selected.includes(e.name))).map((e=>{const t=this._renderInput(e);return r.qy`<div class="card mb-1">
        <div class="card-body">
          <div class="d-flex">
            <div class="flex-grow-1">
              <p class="fw-bold">${e.label||e.name}</p>
            </div>
            <div class="flex-shrink-1">
              <span data-value="${e.name}" @click=${this._variableRemove}>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="text-danger" style=${(0,i.W)({height:"1rem",cursor:"pointer"})}>
                  <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                </svg>
              </a>
            </div>
          </div>
          ${t}
        </div>
      </div>`}));return r.qy`${n}${s}`}}customElements.define("litter-filter",a)},167:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>LitInput});var lit__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(684),_css_bs5__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(349),Shiny__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(270),Shiny__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(Shiny__WEBPACK_IMPORTED_MODULE_2__),jQuery__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(669),jQuery__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(jQuery__WEBPACK_IMPORTED_MODULE_3__),_update_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(478),_update_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_update_js__WEBPACK_IMPORTED_MODULE_4__);class LitInput extends lit__WEBPACK_IMPORTED_MODULE_0__.WF{static styles=[(0,_css_bs5__WEBPACK_IMPORTED_MODULE_1__.n)(),lit__WEBPACK_IMPORTED_MODULE_0__.AH`
      .pointer {
        cursor: pointer;
      }
    `];static properties={value:{type:String},name:{type:String},class:{type:String},priority:{type:String},callback:{type:String},id:{type:String},send_on_render:{type:Boolean,converter:(e,t)=>"false"!=e.toLowerCase(),state:!1},meta:{},rendered:{type:Boolean,state:!1},send_on:{type:String}};constructor(){super(),this.priority="deferred",this.class="",this.meta={},this.id=null,this.timeout=null,this.callback="",this.rendered=!1,this.send_on_render=!0,this.send_on="deferred"}_send(){if(this.callback){const cb=eval(this.callback);return void cb(this)}if(""==this.name)return;if(!this.rendered&&!this.send_on_render)return void(this.rendered=!0);this.rendered=!0;const data={props:this.meta,value:this.value};this.id&&(data.id=this.id);try{this._setInputValue(data)}catch(e){this._sendOnConnect(data)}}firstUpdated(){this.rendered=!0}_sendThrottle(){clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this._send()}),250)}_setInputValue(e){Shiny.setInputValue(this.name+":litter.parse",e,{priority:this.priority})}_sendOnConnect(e){$(document).on("shiny:connected",(()=>{this._setInputValue(e)}))}}},478:()=>{Shiny.addCustomMessageHandler("litter-update-input",(e=>{let t=(e=>e.name?`[name='${e.name}']`:e.sel?sel:e.id?`#${id}`:null)(e);t&&Object.keys(e.props).forEach(((s,r)=>{let i=e.props[s];"object"==typeof i&&(i=JSON.stringify(i)),$(t).attr(s,i)}))}))},270:e=>{"use strict";e.exports=Shiny},669:e=>{"use strict";e.exports=jQuery},804:(e,t,s)=>{"use strict";s.d(t,{OA:()=>r,WL:()=>n,u$:()=>i});const r={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},i=e=>(...t)=>({_$litDirective$:e,values:t});class n{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,s){this._$Ct=e,this._$AM=t,this._$Ci=s}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}},145:(e,t,s)=>{"use strict";s.d(t,{W:()=>_});var r=s(752),i=s(804);const n="important",a=" !"+n,_=(0,i.u$)(class extends i.WL{constructor(e){var t;if(super(e),e.type!==i.OA.ATTRIBUTE||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,s)=>{const r=e[s];return null==r?t:t+`${s=s.includes("-")?s:s.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(e,[t]){const{style:s}=e.element;if(void 0===this.ht){this.ht=new Set;for(const e in t)this.ht.add(e);return this.render(t)}this.ht.forEach((e=>{null==t[e]&&(this.ht.delete(e),e.includes("-")?s.removeProperty(e):s[e]="")}));for(const e in t){const r=t[e];if(null!=r){this.ht.add(e);const t="string"==typeof r&&r.endsWith(a);e.includes("-")||t?s.setProperty(e,t?r.slice(0,-11):r,t?n:""):s[e]=r}}return r.c0}})}},e=>{e.O(0,[866,455],(()=>(988,e(e.s=988)))),e.O()}]);