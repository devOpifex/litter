(self.webpackChunklitter=self.webpackChunklitter||[]).push([[603],{522:(t,e,_)=>{"use strict";var s=_(684),i=(_(270),_(669),_(167));class r extends i.Q{static properties={options:{type:Array},placeholder:{type:String},endpoint:{type:String}};constructor(){super(),this.options=[],this.endpoint="",this.timeout,this.lastSearch=""}firstUpdated(){this.value&&(this.shadowRoot.querySelector("input").value=this.value)}updated(){this.value&&(this.shadowRoot.querySelector("input").value=this.value,this._send())}_setValue(){this.value=this.shadowRoot.querySelector("input").value}_change(){const t=this.shadowRoot.querySelector("input").value;this.shadowRoot.querySelector("input").blur(),0!=this.options.filter((e=>e.value==t)).length&&this._setValue()}_input(){const t=this.shadowRoot.querySelector("input").value;0!=this.options.filter((e=>e.value==t)).length&&this._setValue()}_keyup(t){if(!this.endpoint||""==this.endpoint)return;const e=t.currentTarget.value;e!=this.lastSearch&&(this.lastSearch=e,clearTimeout(this.timeout),this.timeout=setTimeout((()=>{fetch(`${this.endpoint}&query=${encodeURIComponent(e)}`).then((t=>t.json())).then((t=>{this.options=t}))}),150))}render(){const t=this.options.map((t=>s.qy`<option value="${t.value}">${t.label}</option<`));return s.qy`<input @input=${this._input} @change=${this._change} @keyup=${this._keyup} placeholder="${this.placeholder}" list="datalist" class='form-control ${this.class}'/>
    <datalist id="datalist">
      ${t}
		</datalist>`}}customElements.define("litter-datalist",r)},167:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>LitInput});var lit__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(684),_css_bs5__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(349),Shiny__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(270),Shiny__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(Shiny__WEBPACK_IMPORTED_MODULE_2__),jQuery__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(669),jQuery__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(jQuery__WEBPACK_IMPORTED_MODULE_3__),_update_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(478),_update_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_update_js__WEBPACK_IMPORTED_MODULE_4__);class LitInput extends lit__WEBPACK_IMPORTED_MODULE_0__.WF{static styles=[(0,_css_bs5__WEBPACK_IMPORTED_MODULE_1__.n)(),lit__WEBPACK_IMPORTED_MODULE_0__.AH`.pointer {cursor: pointer;}`];static properties={value:{type:String},name:{type:String},class:{type:String},priority:{type:String},callback:{type:String},id:{type:String},send_on_render:{type:Boolean,converter:(t,e)=>"false"!=t.toLowerCase()},meta:{},rendered:{type:Boolean,state:!1},send_on:{type:String}};constructor(){super(),this.priority="deferred",this.class="",this.meta={},this.id=null,this.timeout=null,this.callback="",this.rendered=!1,this.send_on_render=!0,this.send_on="deferred"}_send(){if(this.callback){const cb=eval(this.callback);return void cb(this)}if(""==this.name)return;if(!this.rendered&&!this.send_on_render)return void(this.rendered=!0);this.rendered=!0;const data={props:this.meta,value:this.value};this.id&&(data.id=this.id);try{this._setInputValue(data)}catch(t){this._sendOnConnect(data)}}_sendThrottle(){clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this._send()}),250)}_setInputValue(t){Shiny.setInputValue(this.name+":litter.parse",t,{priority:this.priority})}_sendOnConnect(t){$(document).on("shiny:connected",(()=>{this._setInputValue(t)}))}}},478:()=>{Shiny.addCustomMessageHandler("litter-update-input",(t=>{let e=(t=>t.name?`[name='${t.name}']`:t.sel?sel:t.id?`#${id}`:null)(t);e&&Object.keys(t.props).forEach(((_,s)=>{let i=t.props[_];"object"==typeof i&&(i=JSON.stringify(i)),$(e).attr(_,i)}))}))},270:t=>{"use strict";t.exports=Shiny},669:t=>{"use strict";t.exports=jQuery}},t=>{t.O(0,[866,455],(()=>(522,t(t.s=522)))),t.O()}]);